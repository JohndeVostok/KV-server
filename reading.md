# 论文总结报告

计54 马子轩

### Fail-Slow at Scale: Evidence of Hardware Performance Faults in Large Production Systems

## 实验简介

学界针对硬件失败导致速度变慢的研究并不多.因此文章提出了"fail-slow"这种新的错误类型.

因此，文章研究了12个机构101篇硬件速度减慢的事件的report.并对原因进行了分析.实验中发现.几乎所有的硬件都会出现速度减慢的情况.而且,随着硬件资源的扩展这种速度减慢的影响越来越大.

因此，文章针对事件进行分类分析,从而指导用户和开发者更好的使用硬件资源.

## 观察结果

### 不同的原因

不同的硬件包括SSD Disk Mem Net CPU,不同的来源包括ERR(硬件error),FW(固件错误),TEMP(温度),PWR(供电),ENV(环境),CONF(布局)等.

### 不同的故障

fail-stop to fail-slow:硬件停止导致其他硬件速度降低。比如raid1中一个硬盘fail导致其他整体读取速度降低

fail-transient to fail-slow:瞬时错误导致速度降低. 比如IO error导致retry

fail-partial to fail-slow:部分错误导致速度降低. 比如cache部分错误，增加miss概率从而降低速度

### 不同的症状

永久减速:永久减速不恢复

部分减速:减速后恢复

瞬时减速:一段时间减速并恢复

瞬时死亡:一段时间停止并恢复

### 错误级联

硬件损坏导致其他硬件损坏

硬件损坏导致其他部件等待等行为，导致整体速度降低

### 检测难点

速度降低事件很少见，并且不容易复现

速度降低的硬件很可能兵不是故障原因

外部环境问题，没有记录

很多情况不能知道具体硬件的工作情况

## 内部原因

### SSD

固件bug

电压变化导致多次读取

错误恢复导致多次读取

频繁垃圾回收

磨损平衡被破坏

高温导致重复擦除

重复写

上述原因很多是因为各种原因导致设备中不同部分使用情况不同，导致速度差别。

### Disk

固件bug: 导致大量请求超时

设备error: 增大调度负担

磁头: 不干净等

其他原因: 比如环境温度

### Memory

设备error: 坏掉的地址较多

外部原因: 环境不适合硬件工作

SRAM error: SRAM错误导致偶然错误

### Network

固件bug

NIC驱动bug

设备故障

外部原因

### Processor

外部原因:一般处理器不会有内部原因导致自己速度变慢

## 外部原因

### 温度

阻塞的空气过滤器

低温

坏掉的风扇

风扇固件bug

设计问题

### 供电

电容电压不足

PCU固件bug

供电部分错误

供电不足导致争抢

传感器坏了

### 环境

海拔或太空引起的制冷问题

松动

工作环境和设计不同

### 配置

BIOS bug

人为失误

## 建议

### 给设备提供商

把隐藏错误显示

提供设备速度信息

### 给使用者

在线诊断

监测硬件

收集所有错误信息

### 给系统设计

显示隐藏错误

将速度降低当作错误停止

## 总结

文章针对不同种类的速度下降进行了分类和分析.并针对不用角色给出了不同的应对方式.来优化系统。

现行系统中很多这类减速行为的原因是在于各类容错设计。而这类容错设计导致的减速行为，想要消除也并不容易，文章中给出的方式实际设计上还是有很多局限性，比如其中一部分就是把容错设计删除，这类我认为是不现实的。文章提出的硬件减速这个问题是很新颖的，确实也会给系统造成很多影响，我认为将来这个问题还需要进一步的研究。目前这类定性分析还远远不够。